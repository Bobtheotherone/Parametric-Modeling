from .batch_runner import (
    BatchConfig,
    BatchProgress,
    BatchResult,
    BatchSimulationRunner,
    ProgressCallback,
    SimulationJob,
    SimulationJobResult,
    SimulationStatus,
    create_batch_jobs,
    estimate_batch_time,
    load_batch_result_summary,
    write_batch_result,
)
from .oracle_adapter import (
    OpenEMSAdapter,
    OracleAdapter,
    SimulationSetup,
    ThirdsRuleConfig,
)
from .cli_main import build_parser
from .convergence import (
    ConvergenceCheckResult,
    ConvergenceConfig,
    ConvergenceReport,
    ConvergenceStatus,
    EnergyDecayData,
    MeshInfo,
    build_convergence_manifest_entry,
    check_energy_decay,
    check_frequency_resolution,
    check_passivity,
    check_port_power_balance,
    convergence_gates_passed,
    load_energy_decay_json,
    validate_convergence,
    validate_simulation_convergence,
    write_convergence_report,
)
from .convert import build_simulation_spec, simulation_canonical_json, write_simulation_spec
from .csx_primitives import (
    NM_TO_M,
    BoundingBox3D,
    CSXBox,
    CSXCylinder,
    CSXGeometry,
    CSXMaterial,
    CSXMaterialType,
    CSXPolygon,
    CSXPrimitive,
    CSXPrimitiveType,
    CSXViaPad,
    Point3D,
    air_material,
    copper_material,
    substrate_material,
)
from .geometry import (
    BoardOutlineSpec,
    DiscontinuitySpec,
    GeometrySpec,
    LayerSpec,
    StackupSpec,
    TransmissionLineSpec,
    build_geometry_spec,
    geometry_canonical_json,
    layer_positions_nm,
    write_geometry_spec,
)
from .geometry_adapter import (
    DEFAULT_COPPER_THICKNESS_NM,
    GeometryAdapter,
    LayerZInfo,
    StackupZMap,
    build_csx_geometry,
    build_csx_geometry_from_resolved,
)
from .manifest import (
    ConvergenceMetrics,
    M2ManifestBuilder,
    MeshStatistics,
    PortConfiguration,
    build_m2_manifest,
    load_m2_manifest,
    manifest_hash,
    validate_m2_manifest,
    write_m2_manifest,
)
from .mesh_generator import (
    MeshLineGenerator,
    RefinementZone,
    detect_antipad_refinement_zones,
    detect_trace_refinement_zones,
    detect_via_refinement_zones,
    generate_adaptive_mesh_lines,
    generate_z_mesh_lines,
    mesh_line_summary,
)
from .ports import (
    DeembedSpec,
    DeembedType,
    ImpedanceMismatchError,
    ImpedanceMismatchWarning,
    ImpedanceSpec,
    ImpedanceValidationResult,
    PortBuilder,
    PortGeometrySpec,
    PortPosition,
    PortType,
    WaveguidePortSpec,
    build_ports_from_resolved,
    calculate_cpwg_impedance,
    validate_port_impedance,
    validate_ports_against_geometry,
    waveguide_port_to_basic_port_spec,
)
from .runner import OpenEMSMode, OpenEMSRunner, parse_openems_version_output
from .sim_runner import (
    SimulationError,
    SimulationExecutionError,
    SimulationResult,
    SimulationRunner,
    SimulationSolverMode,
    SimulationTimeoutError,
    load_sparam_result,
)
from .sparam_extract import (
    ExtractionConfig,
    ExtractionResult,
    PortSignalData,
    apply_deembedding,
    build_manifest_entry,
    extract_sparams,
    extract_sparams_from_csv,
    extract_sparams_from_port_signals,
    extract_sparams_from_touchstone,
    load_port_signals_json,
    write_extraction_result,
)
from .spec import (
    SIMULATIONSPEC_SCHEMA,
    BoundarySpec,
    ConductorMaterialSpec,
    DeembedConfigSpec,
    DielectricMaterialSpec,
    EngineSpec,
    ExcitationSpec,
    FrequencySpec,
    GaussianPulseSpec,
    GeometryRefSpec,
    MaterialsSpec,
    MeshResolutionSpec,
    MeshSmoothingSpec,
    MeshSpec,
    OpenEMSToolchainSpec,
    OutputSpec,
    PortSpec,
    SimulationControlSpec,
    SimulationSpec,
    TerminationSpec,
    ToolchainSpec,
    load_simulationspec,
)
from .toolchain import (
    DEFAULT_OPENEMS_LOCKFILE_PATH,
    DEFAULT_OPENEMS_TOOLCHAIN_PATH,
    OpenEMSToolchain,
    is_digest_pinned,
    load_openems_lockfile,
    load_openems_toolchain,
    parse_docker_image_ref,
    validate_openems_version,
)
from .sim_config_validation import (
    DEFAULT_MIN_CELLS_PER_WAVELENGTH,
    DEFAULT_MIN_PML_WAVELENGTHS,
    RECOMMENDED_CELLS_PER_WAVELENGTH,
    RECOMMENDED_MIN_PML_WAVELENGTHS,
    SimConfigValidationReport,
    ValidationResult,
    ValidationStatus,
    load_sim_config_json,
    validate_gpu_config,
    validate_nyquist_compliance,
    validate_pml_adequacy,
    validate_sim_config,
    write_sim_config_json,
    write_validation_report,
)
from .units import FrequencyHz, TimePS, parse_frequency_hz, parse_time_ps

__all__ = [
    # OracleAdapter (REQ-M2-001, REQ-M2-002)
    "OpenEMSAdapter",
    "OracleAdapter",
    "SimulationSetup",
    "ThirdsRuleConfig",
    # Toolchain (existing)
    "DEFAULT_OPENEMS_LOCKFILE_PATH",
    "DEFAULT_OPENEMS_TOOLCHAIN_PATH",
    "BoardOutlineSpec",
    "DiscontinuitySpec",
    "GeometrySpec",
    "LayerSpec",
    "StackupSpec",
    "OpenEMSMode",
    "OpenEMSRunner",
    "OpenEMSToolchain",
    "build_parser",
    "build_geometry_spec",
    "build_simulation_spec",
    "geometry_canonical_json",
    "layer_positions_nm",
    "is_digest_pinned",
    "load_openems_lockfile",
    "load_openems_toolchain",
    "parse_docker_image_ref",
    "parse_openems_version_output",
    "validate_openems_version",
    # Units
    "FrequencyHz",
    "TimePS",
    "parse_frequency_hz",
    "parse_time_ps",
    # Simulation spec models
    "BoundarySpec",
    "ConductorMaterialSpec",
    "DeembedConfigSpec",
    "DielectricMaterialSpec",
    "EngineSpec",
    "ExcitationSpec",
    "FrequencySpec",
    "GeometryRefSpec",
    "MaterialsSpec",
    "MeshResolutionSpec",
    "MeshSmoothingSpec",
    "MeshSpec",
    "OpenEMSToolchainSpec",
    "OutputSpec",
    "PortSpec",
    "SimulationControlSpec",
    "SimulationSpec",
    "TransmissionLineSpec",
    "TerminationSpec",
    "ToolchainSpec",
    "SIMULATIONSPEC_SCHEMA",
    "SimulationError",
    "SimulationExecutionError",
    "SimulationResult",
    "SimulationRunner",
    "SimulationSolverMode",
    "SimulationTimeoutError",
    "load_simulationspec",
    "load_sparam_result",
    "simulation_canonical_json",
    "write_geometry_spec",
    "write_simulation_spec",
    # CSX primitives
    "BoundingBox3D",
    "CSXBox",
    "CSXCylinder",
    "CSXGeometry",
    "CSXMaterial",
    "CSXMaterialType",
    "CSXPolygon",
    "CSXPrimitive",
    "CSXPrimitiveType",
    "CSXViaPad",
    "NM_TO_M",
    "Point3D",
    "air_material",
    "copper_material",
    "substrate_material",
    # Geometry adapter
    "DEFAULT_COPPER_THICKNESS_NM",
    "GeometryAdapter",
    "LayerZInfo",
    "StackupZMap",
    "build_csx_geometry",
    "build_csx_geometry_from_resolved",
    # Mesh generator
    "MeshLineGenerator",
    "RefinementZone",
    "detect_antipad_refinement_zones",
    "detect_trace_refinement_zones",
    "detect_via_refinement_zones",
    "generate_adaptive_mesh_lines",
    "generate_z_mesh_lines",
    "mesh_line_summary",
    # Port configuration (REQ-M2-005)
    "DeembedSpec",
    "DeembedType",
    "ImpedanceMismatchError",
    "ImpedanceMismatchWarning",
    "ImpedanceSpec",
    "ImpedanceValidationResult",
    "PortBuilder",
    "PortGeometrySpec",
    "PortPosition",
    "PortType",
    "WaveguidePortSpec",
    "build_ports_from_resolved",
    "calculate_cpwg_impedance",
    "validate_port_impedance",
    "validate_ports_against_geometry",
    "waveguide_port_to_basic_port_spec",
    # Gaussian pulse excitation (REQ-M2-005)
    "GaussianPulseSpec",
    # S-parameter extraction (REQ-M2-007)
    "ExtractionConfig",
    "ExtractionResult",
    "PortSignalData",
    "apply_deembedding",
    "build_manifest_entry",
    "extract_sparams",
    "extract_sparams_from_csv",
    "extract_sparams_from_port_signals",
    "extract_sparams_from_touchstone",
    "load_port_signals_json",
    "write_extraction_result",
    # M2 Manifest generation (REQ-M2-018)
    "ConvergenceMetrics",
    "M2ManifestBuilder",
    "MeshStatistics",
    "PortConfiguration",
    "build_m2_manifest",
    "load_m2_manifest",
    "manifest_hash",
    "validate_m2_manifest",
    "write_m2_manifest",
    # Convergence checking (REQ-M2-008)
    "ConvergenceCheckResult",
    "ConvergenceConfig",
    "ConvergenceReport",
    "ConvergenceStatus",
    "EnergyDecayData",
    "MeshInfo",
    "build_convergence_manifest_entry",
    "check_energy_decay",
    "check_frequency_resolution",
    "check_passivity",
    "check_port_power_balance",
    "convergence_gates_passed",
    "load_energy_decay_json",
    "validate_convergence",
    "validate_simulation_convergence",
    "write_convergence_report",
    # Batch simulation runner (REQ-M2-009)
    "BatchConfig",
    "BatchProgress",
    "BatchResult",
    "BatchSimulationRunner",
    "ProgressCallback",
    "SimulationJob",
    "SimulationJobResult",
    "SimulationStatus",
    "create_batch_jobs",
    "estimate_batch_time",
    "load_batch_result_summary",
    "write_batch_result",
    # SimConfig validation (REQ-M2-003)
    "DEFAULT_MIN_CELLS_PER_WAVELENGTH",
    "DEFAULT_MIN_PML_WAVELENGTHS",
    "RECOMMENDED_CELLS_PER_WAVELENGTH",
    "RECOMMENDED_MIN_PML_WAVELENGTHS",
    "SimConfigValidationReport",
    "ValidationResult",
    "ValidationStatus",
    "load_sim_config_json",
    "validate_gpu_config",
    "validate_nyquist_compliance",
    "validate_pml_adequacy",
    "validate_sim_config",
    "write_sim_config_json",
    "write_validation_report",
]
